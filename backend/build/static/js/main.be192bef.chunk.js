(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),l=a.n(c),o=(a(77),a(78),a(23)),s=a(63),i=(a(81),a(13)),m=a(9),u=a(46),E=a(37),p=a(31),b=a(45),f=function(){return r.a.createElement("header",null,r.a.createElement(E.a,{bg:"dark",className:"navbar-dark",expand:"lg"},r.a.createElement(p.a,null,r.a.createElement(b.LinkContainer,{to:"/"},r.a.createElement(E.a.Brand,null,"Movie app")),r.a.createElement(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(E.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(u.a,{className:"ml-auto"},r.a.createElement(b.LinkContainer,{to:"/"},r.a.createElement(u.a.Link,null,"Movies")),r.a.createElement(b.LinkContainer,{to:"/add"},r.a.createElement(u.a.Link,null,r.a.createElement("i",{className:"fas fa-plus"})," Add movie")))))))},d=function(){return r.a.createElement("footer",null,r.a.createElement(p.a,null,r.a.createElement("div",{className:"text-center"},r.a.createElement("p",null,"Copyright \xa9MovieApp2020"))))},v=a(12),h=a.n(v),g=a(20),O=a(7),j=a(21),x=a.n(j),N=a(67),C=function(){return r.a.createElement("div",{className:"text-center"},r.a.createElement(N.a,{animation:"border",size:"lg",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},k=a(109),y=function(e){var t=e.stars;return r.a.createElement("span",null,t>=1&&r.a.createElement("i",{className:"fas fa-star"}),t<=1&&r.a.createElement("i",{className:"far fa-star"}),t>=2&&r.a.createElement("i",{className:"fas fa-star"}),t<=2&&r.a.createElement("i",{className:"far fa-star"}),t>=3&&r.a.createElement("i",{className:"fas fa-star"}),t<3&&r.a.createElement("i",{className:"far fa-star"}),t>=4&&r.a.createElement("i",{className:"fas fa-star"}),t<4&&r.a.createElement("i",{className:"far fa-star"}),t>=5&&r.a.createElement("i",{className:"fas fa-star"}),t<5&&r.a.createElement("i",{className:"far fa-star"}),t>=6&&r.a.createElement("i",{className:"fas fa-star"}),t<6&&r.a.createElement("i",{className:"far fa-star"}),t>=7&&r.a.createElement("i",{className:"fas fa-star"}),t<7&&r.a.createElement("i",{className:"far fa-star"}),t>=8&&r.a.createElement("i",{className:"fas fa-star"}),t<8&&r.a.createElement("i",{className:"far fa-star"}),t>=9&&r.a.createElement("i",{className:"fas fa-star"}),t<9&&r.a.createElement("i",{className:"far fa-star"}),t>=10&&r.a.createElement("i",{className:"fas fa-star"}),t<10&&r.a.createElement("i",{className:"far fa-star"}),"| ",t,"/10")},w=function(e){var t=e.movie;return r.a.createElement(k.a,{style:{width:"18rem"}},r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Title,null,t.name),r.a.createElement(y,{stars:t.rating}),r.a.createElement("hr",null),r.a.createElement(k.a.Text,null,"Genre: ",t.genre),r.a.createElement(i.Link,{to:"/movies/".concat(t.id)},r.a.createElement("button",{className:"btn btn-primary btn-sm"},r.a.createElement("i",{className:"fas fa-info-circle"})," Details"))))},S=function(e){var t=e.handleClick,a=e.errorDetails,n=void 0===a?{text:"No details.",errorCode:0}:a;return r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement("h3",{className:"text-danger"},"Something went wrong."),r.a.createElement("p",null,n.text),r.a.createElement("h1",{className:"mt-3"},n.errorCode),500===n.errorCode&&r.a.createElement("div",{className:"mt-3"},r.a.createElement("button",{onClick:t,className:"btn btn-success"},"Reload")),429===n.errorCode&&r.a.createElement("div",{className:"mt-3"},r.a.createElement("button",{onClick:t,className:"btn btn-success"},"Reload")),404===n.errorCode&&r.a.createElement("div",{className:"mt-3"},r.a.createElement(i.Link,{to:"/"},r.a.createElement("button",{className:"btn btn-success"},"Back to movies"))))},L=function(){var e=Object(n.useState)([]),t=Object(O.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(O.a)(l,2),s=o[0],i=o[1],m=Object(n.useState)({text:"",errorCode:0}),u=Object(O.a)(m,2),E=u[0],p=u[1],b=Object(n.useState)(!1),f=Object(O.a)(b,2),d=f[0],v=f[1],j=Object(n.useCallback)(Object(g.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!1),v(!1),e.prev=2,e.next=5,x.a.get("/api/v1/movies");case 5:t=e.sent,a=t.data,c(a.movies),v(!0),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),N(e.t0),v(!0),i(!0);case 16:case"end":return e.stop()}}),e,null,[[2,11]])}))),[]);function N(e){var t=e.response;t&&(500===t.status&&p({text:"Internal server error.",errorCode:t.status}),429===t.status&&p({text:"Too many requests. Wait 3 minutes.",errorCode:t.status}))}return Object(n.useEffect)((function(){j()}),[]),r.a.createElement("div",null,r.a.createElement("h3",null,"Movies"),r.a.createElement("hr",null),!1===d&&!s&&r.a.createElement(C,null),!0===d&&r.a.createElement("div",{className:"movie-item-list"},a&&a.map((function(e){return r.a.createElement("div",{key:e.id,className:"movie-item"},r.a.createElement(w,{movie:e}))}))),!0===d&&a&&0===a.length&&!s&&r.a.createElement("h3",{className:"text-center mt-5"},"No movies."),s&&r.a.createElement(S,{handleClick:j,errorDetails:E}))},B=a(8),T=a(6),I=function(){var e=Object(o.d)(),t=Object(n.useState)(0),a=Object(O.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!1),i=Object(O.a)(s,2),u=i[0],E=i[1],p=Object(n.useState)(!1),b=Object(O.a)(p,2),f=b[0],d=b[1],v=Object(n.useState)({name:"",genre:"Action",rating:1,explicit:!1,plot:""}),j=Object(O.a)(v,2),N=j[0],k=j[1];function y(e){var t="true"===e.target.value;k(Object(B.a)(Object(B.a)({},N),{},{explicit:t}))}function w(){return(w=Object(g.a)(h.a.mark((function t(a){var n,r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!S()){t.next=24;break}return d(!0),t.prev=3,t.next=6,x.a.post("/api/v1/movies",N);case 6:if(n=t.sent,!(r=n.data).success){t.next=15;break}return d(!1),l(r.movie[0].id),k({name:"",genre:"Action",rating:1,explicit:!1,plot:""}),e.show("Movie added!",{type:"success"}),E(!0),t.abrupt("return");case 15:t.next=24;break;case 17:return t.prev=17,t.t0=t.catch(3),(c=t.t0.response.data).error&&e.show(c.error,{type:"error"}),500===t.t0.response.status&&e.show(t.t0.response.statusText,{type:"error"}),d(!1),t.abrupt("return");case 24:e.show("Please fill out all fields.",{type:"error"});case 25:case"end":return t.stop()}}),t,null,[[3,17]])})))).apply(this,arguments)}function S(){return 0!==N.name.trim().length&&(0!==N.genre.trim().length&&(!(N.rating<1||N.rating>10)&&0!==N.plot.trim().length))}return r.a.createElement("div",null,function(){if(u)return r.a.createElement(m.c,{to:"/movies/".concat(c)})}(),r.a.createElement("h3",null,"Add movie"),r.a.createElement("hr",null),f&&r.a.createElement(C,null),r.a.createElement(T.a,{onSubmit:function(e){return w.apply(this,arguments)}},r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,"Name"),r.a.createElement(T.a.Control,{type:"text",name:"name",value:N.name,onChange:function(e){k(Object(B.a)(Object(B.a)({},N),{},{name:e.target.value}))},placeholder:"Enter name"})),r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,"Genre"),r.a.createElement(T.a.Control,{as:"select",value:N.genre,onChange:function(e){k(Object(B.a)(Object(B.a)({},N),{},{genre:e.target.value}))},placeholder:"Enter genre"},r.a.createElement("option",{value:"Action"},"Action"),r.a.createElement("option",{value:"Commedy"},"Commedy"),r.a.createElement("option",{value:"Crime"},"Crime"),r.a.createElement("option",{value:"Drama"},"Drama"),r.a.createElement("option",{value:"Horror"},"Horror"),r.a.createElement("option",{value:"Paranormal"},"Paranormal"),r.a.createElement("option",{value:"Science Fiction"},"Science Fiction"),r.a.createElement("option",{value:"Thriller"},"Thriller"))),r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,"Rating"),r.a.createElement(T.a.Control,{type:"number",max:"10",min:"1",value:N.rating,onChange:function(t){var a=t.target.value;a>10||a<1?e.show("Rating must be from 1 - 10",{type:"error"}):k(Object(B.a)(Object(B.a)({},N),{},{rating:a}))},placeholder:"Enter rating"})),r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,"Explicit"),r.a.createElement("br",null),r.a.createElement(T.a.Check,{type:"radio",inline:!0,name:"isExplicit",onChange:y,checked:!0===N.explicit,value:"true",id:"yes",label:"Yes"}),r.a.createElement(T.a.Check,{type:"radio",inline:!0,name:"isExplicit",onChange:y,checked:!1===N.explicit,value:"false",id:"no",label:"No"})),r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,"Plot"),r.a.createElement(T.a.Control,{as:"textarea",rows:"3",onChange:function(e){k(Object(B.a)(Object(B.a)({},N),{},{plot:e.target.value.trim()}))}})),r.a.createElement("button",{className:"btn btn-primary btn-sm",type:"submit"},"Submit")))},D=function(){var e=Object(o.d)(),t=Object(m.m)().id,a=Object(n.useState)(!1),c=Object(O.a)(a,2),l=c[0],s=c[1],u=Object(n.useState)(!1),E=Object(O.a)(u,2),p=E[0],b=E[1],f=Object(n.useState)(!1),d=Object(O.a)(f,2),v=d[0],j=d[1],N=Object(n.useState)(""),k=Object(O.a)(N,2),y=k[0],w=k[1],L=Object(n.useState)({name:"",genre:"Action",rating:1,explicit:!1,plot:"",id:""}),I=Object(O.a)(L,2),D=I[0],G=I[1];function A(e){return R.apply(this,arguments)}function R(){return(R=Object(g.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!1),b(!0),e.prev=2,e.next=5,x.a.get("/api/v1/movies/".concat(t));case 5:a=e.sent,n=a.data,r=n.movie,G(r),b(!1),e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(2),e.t0){e.next=16;break}return e.abrupt("return");case 16:500===e.t0.response.status?w({text:e.t0.response.statusText,errorCode:500}):429===e.t0.response.status&&w({text:e.t0.response.statusText,errorCode:429}),j(!0);case 18:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function M(e){var t="true"===e.target.value;G(Object(B.a)(Object(B.a)({},D),{},{explicit:t}))}function F(){return(F=Object(g.a)(h.a.mark((function a(n){var r,c;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),!P()){a.next=21;break}return b(!0),a.prev=3,a.next=6,x.a.put("/api/v1/movies/".concat(t),D);case 6:if(r=a.sent,!r.data.success){a.next=13;break}return b(!1),e.show("Movie updated!",{type:"success"}),s(!0),a.abrupt("return");case 13:a.next=21;break;case 15:return a.prev=15,a.t0=a.catch(3),(c=a.t0.response.data).error?e.show(c.error,{type:"error"}):500===a.t0.response.status&&e.show("Something went wrong while proccesing your request.",{type:"error"}),b(!1),a.abrupt("return");case 21:e.show("Please fill out all fields.",{type:"error"});case 22:case"end":return a.stop()}}),a,null,[[3,15]])})))).apply(this,arguments)}function P(){return 0!==D.name.trim().length&&(0!==D.genre.trim().length&&(!(D.rating<1||D.rating>10)&&0!==D.plot.trim().length))}return Object(n.useEffect)((function(){A(t)}),[t]),r.a.createElement("div",null,function(){if(l)return r.a.createElement(m.c,{to:"/movies/".concat(t)})}(),r.a.createElement("h3",null,"Edit movie"),r.a.createElement("hr",null),p&&!v&&r.a.createElement(C,null),!v&&!p&&D&&r.a.createElement(T.a,{onSubmit:function(e){return F.apply(this,arguments)}},r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,"Name"),r.a.createElement(T.a.Control,{type:"text",name:"name",value:D.name,onChange:function(e){G(Object(B.a)(Object(B.a)({},D),{},{name:e.target.value}))},placeholder:"Enter name"})),r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,"Genre"),r.a.createElement(T.a.Control,{as:"select",value:D.genre,onChange:function(e){G(Object(B.a)(Object(B.a)({},D),{},{genre:e.target.value}))},placeholder:"Enter genre"},r.a.createElement("option",{value:"Action"},"Action"),r.a.createElement("option",{value:"Commedy"},"Commedy"),r.a.createElement("option",{value:"Crime"},"Crime"),r.a.createElement("option",{value:"Drama"},"Drama"),r.a.createElement("option",{value:"Fantasy"},"Fantasy"),r.a.createElement("option",{value:"Horror"},"Horror"),r.a.createElement("option",{value:"Paranormal"},"Paranormal"),r.a.createElement("option",{value:"Science Fiction"},"Science Fiction"),r.a.createElement("option",{value:"Thriller"},"Thriller"))),r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,"Rating"),r.a.createElement(T.a.Control,{type:"number",max:"10",min:"1",value:D.rating,onChange:function(t){var a=t.target.value;a>10||a<1?e.show("Rating must be from 1 - 10",{type:"error"}):G(Object(B.a)(Object(B.a)({},D),{},{rating:a}))},placeholder:"Enter rating"})),r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,"Explicit"),r.a.createElement("br",null),r.a.createElement(T.a.Check,{type:"radio",inline:!0,name:"isExplicit",onChange:M,checked:!0===D.explicit,value:"true",id:"yes",label:"Yes"}),r.a.createElement(T.a.Check,{type:"radio",inline:!0,name:"isExplicit",onChange:M,checked:!1===D.explicit,value:"false",id:"no",label:"No"})),r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,"Plot"),r.a.createElement(T.a.Control,{as:"textarea",rows:"3",value:D.plot,onChange:function(e){G(Object(B.a)(Object(B.a)({},D),{},{plot:e.target.value.trim()}))}})),r.a.createElement("button",{className:"btn btn-primary btn-sm",type:"submit"},"Submit"),r.a.createElement(i.Link,{to:"/movies/".concat(t)},r.a.createElement("button",{className:"btn btn-warning btn-sm ml-2"},"Cancel"))),v&&r.a.createElement(S,{handleClick:A.bind(void 0,t),errorDetails:y}))},G=a(34),A=Object(n.forwardRef)((function(e,t){var a=e.movieId,c=Object(n.useState)(!1),l=Object(O.a)(c,2),s=l[0],i=l[1],u=Object(o.d)(),E=Object(n.useState)(!1),p=Object(O.a)(E,2),b=p[0],f=p[1],d=function(){f(!1)},v=function(){var e=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.delete("/api/v1/movies/".concat(a));case 2:if(t=e.sent,!t.data.success){e.next=8;break}return u.success("Movie deleted!"),i(!0),e.abrupt("return");case 8:f(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useImperativeHandle)(t,(function(){return{openModal:function(){return f(!0)}}})),r.a.createElement("div",{ref:t},function(){if(s)return r.a.createElement(m.c,{to:"/"})}(),r.a.createElement(G.a,{show:b,animation:!1,onHide:d},r.a.createElement(G.a.Header,{closeButton:!0},r.a.createElement(G.a.Title,null,"Delete movie")),r.a.createElement(G.a.Body,null,"Are you sure?"),r.a.createElement(G.a.Footer,null,r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:d},"Close"),r.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:v},"Delete"))))})),R=function(e){var t=e.movie,a=Object(n.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"mt-4"},t.name),r.a.createElement(y,{stars:t.rating}),r.a.createElement("h4",{className:"mt-3"},"GENRE: ",t.genre),r.a.createElement("hr",null),r.a.createElement("p",null,t.plot),r.a.createElement("hr",null),r.a.createElement("p",null,!1===t.explicit&&r.a.createElement("span",{className:"text-success"},r.a.createElement("i",{className:"fas fa-check"})," This movie doesn't contain explicit content."),!0===t.explicit&&r.a.createElement("span",{className:"text-danger"},r.a.createElement("i",{className:"fas fa-exclamation"})," This movie contains explicit content.")),r.a.createElement("div",{className:"movie-controls mt-4"},r.a.createElement(i.Link,{to:"/movies/".concat(t.id,"/edit")},r.a.createElement("button",{className:"btn btn-primary btn-sm"},r.a.createElement("i",{className:"far fa-edit"})," Edit")),r.a.createElement("button",{onClick:function(){a.current.openModal()},className:"btn btn-danger btn-sm"},r.a.createElement("i",{className:"fa fa-trash"})," Delete"),r.a.createElement(A,{ref:a,movieId:t.id})))},M=function(){var e=Object(m.m)().id,t=Object(n.useState)({}),a=Object(O.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),s=Object(O.a)(o,2),u=s[0],E=s[1],p=Object(n.useState)(!1),b=Object(O.a)(p,2),f=b[0],d=b[1],v=Object(n.useState)(!1),j=Object(O.a)(v,2),N=j[0],k=j[1],y=Object(n.useCallback)(Object(g.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!1),t.prev=1,t.next=4,x.a.get("/api/v1/movies/".concat(e));case 4:a=t.sent,n=a.data,k(!0),l(n.movie),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),w(t.t0),d(!0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),[e]);function w(e){var t=e.response;t&&(500===t.status&&E({text:"Internal server error.",errorCode:t.status}),429===t.status&&E({text:"Too many requests. Wait 3 minutes.",errorCode:t.status}),404===t.status&&E({text:"Resource not fonud.",errorCode:t.status}))}return Object(n.useEffect)((function(){y()}),[y]),r.a.createElement("div",null,r.a.createElement("h3",null,"Movie details"),r.a.createElement("hr",null),r.a.createElement(i.Link,{to:"/"},r.a.createElement("button",{className:"btn btn-primary btn-sm"},r.a.createElement("i",{className:"far fa-arrow-alt-circle-left"})," Back")),!1===N&&!f&&r.a.createElement(C,null),c&&!0===N&&!f&&r.a.createElement(R,{movie:c}),!1===N&&f&&r.a.createElement(S,{handleClick:y,errorDetails:u}))};var F=function(){return r.a.createElement(i.BrowserRouter,null,r.a.createElement(f,null),r.a.createElement(p.a,null,r.a.createElement("main",{className:"mt-2"},r.a.createElement(m.d,{path:"/",component:L,exact:!0}),r.a.createElement(m.d,{path:"/movies/:id",component:M,exact:!0}),r.a.createElement(m.d,{path:"/movies/:id/edit",component:D}),r.a.createElement(m.d,{path:"/add",component:I}))),r.a.createElement(d,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P={position:o.b.TOP_CENTER,timeout:2e3,offset:"70px",transition:o.c.FADE};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,Object.assign({template:s.a},P),r.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,a){e.exports=a(105)},77:function(e,t,a){},78:function(e,t,a){},81:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.be192bef.chunk.js.map